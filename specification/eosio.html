<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>EOSIO - Document Graph</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../background/introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Background</li><li class="chapter-item expanded "><a href="../background/triples.html"><strong aria-hidden="true">1.</strong> Semantic Triples</a></li><li class="chapter-item expanded "><a href="../background/migrations.html"><strong aria-hidden="true">2.</strong> Data Migrations</a></li><li class="chapter-item expanded "><a href="../background/use-cases.html"><strong aria-hidden="true">3.</strong> Use Cases</a></li><li class="chapter-item expanded "><a href="../background/links.html"><strong aria-hidden="true">4.</strong> Links</a></li><li class="chapter-item expanded affix "><li class="part-title">Specification</li><li class="chapter-item expanded "><a href="../specification/features.html"><strong aria-hidden="true">5.</strong> Features</a></li><li class="chapter-item expanded "><a href="../specification/graph.html"><strong aria-hidden="true">6.</strong> Graph</a></li><li class="chapter-item expanded "><a href="../specification/documents.html"><strong aria-hidden="true">7.</strong> Documents</a></li><li class="chapter-item expanded "><a href="../specification/edges.html"><strong aria-hidden="true">8.</strong> Edges</a></li><li class="chapter-item expanded affix "><li class="part-title">Implementations</li><li class="chapter-item expanded "><a href="../specification/eosio.html" class="active"><strong aria-hidden="true">9.</strong> EOSIO</a></li><li class="chapter-item expanded "><a href="../specification/substrate.html"><strong aria-hidden="true">10.</strong> Substrate</a></li><li class="chapter-item expanded affix "><li class="part-title">Explorer</li><li class="chapter-item expanded "><a href="../explorer/getting-started.html"><strong aria-hidden="true">11.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../explorer/tutorials.html"><strong aria-hidden="true">12.</strong> Tutorials</a></li><li class="chapter-item expanded "><a href="../explorer/tutorials-videos.html"><strong aria-hidden="true">13.</strong> Tutorials Videos</a></li><li class="chapter-item expanded affix "><li class="part-title">dgctl CLI</li><li class="chapter-item expanded "><a href="../dgctl/installation.html"><strong aria-hidden="true">14.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../dgctl/commands.html"><strong aria-hidden="true">15.</strong> Commands</a></li><li class="chapter-item expanded "><a href="../contributing.html"><strong aria-hidden="true">16.</strong> Contributing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Document Graph</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/hashed-io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="eosio-implementation"><a class="header" href="#eosio-implementation">EOSIO Implementation</a></h1>
<p>For the full smart contracts, see the <a href="https://github.com/hashed-io/document-graph">Github repository</a></p>
<p>EOSIO (c++) implementation of the types of the Document Graph smart contract:</p>
<h3 id="flexvalue-type"><a class="header" href="#flexvalue-type"><code>FlexValue</code> type</a></h3>
<p>The <code>FlexValue</code> type is a variant that supports all of the common data types supported in the C++/WASM SDK for EOSIO. It stores the data as an array, where the first value is a <code>uint8</code> representing the index of the type in the <code>typedef</code> definition, followed by the actual value.</p>
<pre><code class="language-c++">    typedef std::variant&lt;std::monostate, 
                         eosio::name, 
                         std::string, 
                         eosio::asset, 
                         eosio::time_point,
                         std::int64_t, 
                         eosio::checksum256&gt;
            FlexValue;
</code></pre>
<h3 id="content-type"><a class="header" href="#content-type"><code>Content</code> type</a></h3>
<p>The <code>Content</code> type is simply a <code>FlexValue</code> with an optional label. The smart contract also creates an alias for <code>ContentGroup</code> and <code>ContentGroups</code> to organize the lists of <code>Content</code>. </p>
<p>It is common for <code>ContentGroups</code> to be labeled by using a <code>Content</code> item with a label of <code>content_group_label</code>.</p>
<pre><code class="language-c++">    struct Content {
        std::string label;
        FlexValue value;
    };

    using ContentGroup = std::vector&lt;Content&gt;;
    using ContentGroups = std::vector&lt;ContentGroup&gt;;
</code></pre>
<h4 id="example-content-group-serialized-to-json"><a class="header" href="#example-content-group-serialized-to-json">Example Content Group serialized to json</a></h4>
<pre><code class="language-json">    &quot;content_groups&quot;: [
        [
            {
                &quot;label&quot;: &quot;content_group_name&quot;,
                &quot;value&quot;: [
                    &quot;string&quot;,
                    &quot;My Salary Content Group&quot;
                ]
            },
            {
                &quot;label&quot;: &quot;salary_amount&quot;,
                &quot;value&quot;: [
                    &quot;asset&quot;,
                    &quot;130.00 USD&quot;
                ]
            },
            {
                &quot;label&quot;: &quot;recipient&quot;,
                &quot;value&quot;: [
                    &quot;name&quot;,
                    &quot;daomember&quot;
                ]
            }
        ]
    ]
</code></pre>
<h3 id="certificate-type"><a class="header" href="#certificate-type"><code>Certificate</code> type</a></h3>
<p>The <code>Certificate</code> type represents an account that is certifying, or attesting to, the content within that document. It includes the account name and optional notes for the signer. Of course, the signature from the certifier is required for creation of the certificate.</p>
<blockquote>
<p>Certificates will likely be replaced with <a href="https://www.w3.org/TR/vc-data-model/">verifiable credentials</a></p>
</blockquote>
<pre><code class="language-c++">    struct Certificate
    {
        eosio::name certifier;
        std::string notes;
        eosio::time_point certification_date = eosio::current_time_point();
    };
</code></pre>
<h3 id="document-type"><a class="header" href="#document-type"><code>Document</code> type</a></h3>
<p>The <code>Document</code> type stores the header information, <code>ContentGroups</code>, and a list of <code>Certificates</code>.</p>
<pre><code class="language-c++">    struct Document 
    {
        std::uint64_t id;
        eosio::checksum256 hash;
        eosio::name creator;
        ContentGroups content_groups;
        std::vector&lt;Certificate&gt; certificates;
        eosio::time_point created_date;
        eosio::name contract;
    };
</code></pre>
<h3 id="example-document-serialized-to-json"><a class="header" href="#example-document-serialized-to-json">Example Document serialized to json</a></h3>
<pre><code class="language-json">{
    &quot;id&quot;:4965,
    &quot;hash&quot;:&quot;50be6cf143050a11e9db3a52ef68e10e07b07cf6cc68007ad46a14baf307c5b9&quot;,
    &quot;creator&quot;: &quot;bob&quot;,
    &quot;content_groups&quot;: [
        [
            {
                &quot;label&quot;: &quot;content_group_name&quot;,
                &quot;value&quot;: [
                    &quot;string&quot;,
                    &quot;My Content Group #1&quot;
                ]
            },
            {
                &quot;label&quot;: &quot;salary_amount&quot;,
                &quot;value&quot;: [
                    &quot;asset&quot;,
                    &quot;130.00 USD&quot;
                ]
            },
            {
                &quot;label&quot;: &quot;referrer&quot;,
                &quot;value&quot;: [
                    &quot;name&quot;,
                    &quot;friendacct&quot;
                ]
            },
            {
                &quot;label&quot;: &quot;vote_count&quot;,
                &quot;value&quot;: [
                    &quot;int64&quot;,
                    67
                ]
            }
        ]
    ],
    &quot;certificates&quot;:[],
    &quot;created_date&quot;:&quot;2021-01-12T18:21:10.000&quot;,
    &quot;contract&quot;:&quot;dao.hypha&quot;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../specification/edges.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../specification/substrate.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../specification/edges.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../specification/substrate.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
